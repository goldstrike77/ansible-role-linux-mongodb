---
mongod_python_dependent_packages:
  - 'pip'
  - 'pymongo'

mongod_pypi_url: 'https://mirrors.aliyun.com/pypi/simple/'

mongod_folder:
  - '{{ mongod_path }}/mongod'
  - '{{ mongod_path }}/backup/mongod/temp'

mongod_kernel_parameters:
  - { variable: 'kernel.pid_max', value: '65536' }
  - { variable: 'kernel.threads-max', value: '65536' }
  - { variable: 'vm.dirty_background_ratio', value: '5' }
  - { variable: 'vm.dirty_ratio', value: '15' }
  - { variable: 'vm.max_map_count', value: '262144' }
  - { variable: 'vm.swappiness', value: '10' }

mongod_conf_scripts:
  - { src: 'mongodb.key.j2', dest: '{{ mongod_path }}/mongod/mongodb.key', mode: '600', owner: 'mongod' }
  - { src: 'mongod.conf.j2', dest: '/etc/mongod.conf', mode: '644', owner: 'root' }
  - { src: 'mongod.sysconfig.j2', dest: '/etc/sysconfig/mongod', mode: '644', owner: 'root' }
  - { src: 'mongod.logrotate.j2', dest: '/etc/logrotate.d/mongod', mode: '644', owner: 'root' }

mongod_audit_log_commands: # https://docs.mongodb.com/manual/reference/audit-message
  - 'addShard'
  - 'createCollection'
  - 'createDatabase'
  - 'createIndex'
  - 'createRole'
  - 'createUser'
  - 'dropAllRolesFromDatabase'
  - 'dropAllUsersFromDatabase'
  - 'dropCollection'
  - 'dropDatabase'
  - 'dropIndex'
  - 'dropRole'
  - 'dropUser'
  - 'enableSharding'
  - 'grantPrivilegesToRole'
  - 'grantRolesToRole'
  - 'grantRolesToUser'
  - 'removeShard'
  - 'renameCollection'
  - 'replSetReconfig'
  - 'revokePrivilegesFromRole'
  - 'revokeRolesFromRole'
  - 'revokeRolesFromUser'
  - 'shardCollection'
  - 'shutdown'
  - 'updateRole'
  - 'updateUser'
